# AI 음식 분석 예외 처리 강화 및 촬영 가이드 추가

## 구현 완료 사항

### 1. 촬영 가이드 다이얼로그 추가 ✅
**파일:** `lib/presentation/screens/member/member_diet_screen.dart`

AI 분석 버튼 클릭 시 자동으로 촬영 가이드 표시:

**가이드 내용:**
- ✓ 음식이 잘 보이도록 촬영해주세요
- ✓ 밝은 곳에서 촬영하면 좋아요
- ✓ 음식 전체가 화면에 들어오게 해주세요
- ⚠️ 음식이 아닌 이미지는 분석이 어려워요

**구현 위치:**
- `_showPhotoGuideDialog()` 메서드 (line 192-248)
- `_buildGuideItem()` 헬퍼 메서드 (line 250-262)
- `_showAnalyzeBottomSheet()`에서 가이드 먼저 표시 (line 275)

### 2. 낮은 신뢰도 경고 (confidence < 0.5) ✅
**파일:** `lib/presentation/screens/member/member_diet_screen.dart`

AI 분석 결과의 신뢰도가 0.5 미만일 때 경고 다이얼로그 표시:

**경고 메시지:**
- "분석 결과 확인 필요"
- "분석 결과가 정확하지 않을 수 있습니다"
- "음식 사진을 다시 촬영해보세요"

**사용자 선택지:**
- "그대로 사용" - 분석 결과를 그대로 적용
- "다시 촬영" - 결과를 삭제하고 다시 시도

**구현 위치:** line 418-428

### 3. 0kcal 결과 안내 ✅
**파일:** `lib/presentation/screens/member/member_diet_screen.dart`

칼로리가 0으로 분석된 경우 명확한 안내:

**안내 메시지:**
- "음식 인식 실패"
- "음식을 인식하지 못했습니다"
- "다른 사진으로 다시 시도해주세요"

**구현 위치:** line 408-416

### 4. 통합 다이얼로그 시스템 ✅
**메서드:** `_showLowQualityResultDialog()`

낮은 품질 결과를 위한 통합 다이얼로그:

**파라미터:**
- `title`: 다이얼로그 제목
- `message`: 안내 메시지
- `icon`: 아이콘 (❌, ⚠️ 등)
- `showResult`: 분석 결과 표시 여부
- `result`: 분석된 음식 정보

**구현 위치:** line 447-510

## 사용자 경험 흐름

```
1. 사용자가 "AI 분석" 버튼 클릭
   ↓
2. 📸 촬영 가이드 다이얼로그 표시
   ↓
3. 식사 유형 선택 (아침/점심/저녁/간식)
   ↓
4. 카메라/갤러리 선택
   ↓
5. AI 분석 실행
   ↓
6. 결과 검증:
   - 0kcal → ❌ "음식 인식 실패" 다이얼로그
   - confidence < 0.5 → ⚠️ "분석 결과 확인 필요" 다이얼로그 (그대로 사용/다시 촬영)
   - 정상 → ✅ 성공 메시지
```

## 기술적 세부사항

### 신뢰도 기준
- **높음 (≥ 0.8)**: 초록색, "높음" 라벨
- **보통 (0.5-0.8)**: 주황색, "보통" 라벨
- **낮음 (< 0.5)**: 빨간색, "낮음" 라벨 + 경고 다이얼로그

### UI/UX 개선사항
- 한글 주석 사용
- 사용자 친화적인 메시지
- 명확한 시각적 피드백 (이모지, 색상)
- 컨텍스트에 따른 액션 제공

### 기존 기능 유지
- 기존 UI 흐름 완전 보존
- 검색으로 추가한 음식은 신뢰도 100%
- AI 분석 음식에만 신뢰도 표시

## 검증

### 정적 분석
```bash
flutter analyze lib/presentation/screens/member/member_diet_screen.dart
# 결과: No issues found!
```

### 파일 수정 내역
- ✅ `lib/presentation/screens/member/member_diet_screen.dart` (3개 메서드 추가, 1개 메서드 수정)

## 다음 단계 제안
- 실제 사용자 테스트로 신뢰도 임계값 조정
- 다국어 지원 시 메시지 리소스화
- 분석 실패 통계 수집 및 모니터링
